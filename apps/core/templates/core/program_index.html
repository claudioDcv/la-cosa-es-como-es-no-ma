{% extends 'base.html' %}

{% load static %}
{% load custom_tags %}

{% block subheader %}
  <div class="subnav">
    {% include "subnav.html" %}
     | <strong>Periodo</strong>
    <span>
        <select name="" id="period-selected" class="form-control">
            {% for period in periods.periods %}
            <option value="{{period.id}}" {% if period.current %}selected="selected"{% endif %}>{{period.name}}</option>
            {% endfor %}
        </select>
    </span>
  </div>
{% endblock %}

{% block title %}Programa ({{ program.name }}){% endblock %}

{% block content %}
{% if has_profile %}

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'home' %}"><i class="fas fa-home"></i> Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Programa ({{ program.name }})</li>
  </ol>
</nav>

  {% if courses|length > 0 %}
    {% if  current_profile.code == 'admin' %}
      {% include "core/admin_index.html" %}
    {% endif %}

    {% if  current_profile.code == 'teacher' %}
      {% include "core/teacher_index.html" %}
    {% endif %}

    {% if  current_profile.code == 'student' %}
      {% include "core/student_index.html" %}
    {% endif %}

  {% else %}
    No existen elementos.
  {% endif %}

{% else %}
No posee permisos.
{% endif %}

<script>
    var periodSelected = document.getElementById('period-selected');

    if (periodSelected) {
      periodSelected.addEventListener('change', function(event) {

        var value = this.options[this.selectedIndex].value;
        var url = "{% url 'program-index' code profile 0 %}";
        var urlReload = url.replace(/.$/, value);
        location.href = urlReload;
      }, false);
    }
  </script>

{% endblock %}